<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>

<div id="container"></div>


<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=3fcd0f7be25ab2919d085012ac1faabf"></script>
<script>
  var map = new AMap.Map('container', {
    resizeEnable: true,
    zoom: 11
  })

  map.plugin('AMap.Geolocation', function() {
    var geolocation = new AMap.Geolocation({
      // 是否使用高精度定位，默认：true
      enableHighAccuracy: true,
      // 设置定位超时时间，默认：无穷大
      timeout: 10000,
      //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
      zoomToAccuracy: true,
      //  定位按钮的排放位置,  RB表示右下
      buttonPosition: 'RB',
      // showButton: true,
      // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)
      buttonOffset: new AMap.Pixel(10, 20),
    })

    map.addControl(geolocation);
    geolocation.getCurrentPosition()
    AMap.event.addListener(geolocation, 'complete', onComplete)
    AMap.event.addListener(geolocation, 'error', onError)
    function onComplete (data) {
      // data是具体的定位信息
      console.log(data)
    }

    function onError (data) {
      // 定位出错
    }
  })

  AMap.plugin('AMap.CitySearch', function () {
    var citySearch = new AMap.CitySearch()
    citySearch.getLocalCity(function (status, result) {
      if (status === 'complete' && result.info === 'OK') {
        console.log(result)
        // 查询成功，result即为当前所在城市信息
      }
    })
  })
</script>

<!--<script src="js/index.js"></script>-->

</body>
</html>